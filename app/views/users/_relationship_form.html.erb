<% if user_signed_in? %>
  <% unless current_user == user %>
    <% unless current_user.following.include? user %>
      <%= form_for current_user.active_relationships.build, remote: true do |f| %>
        <%= hidden_field_tag :user_id, user.id %>
        <%= f.submit t("application.buttons.follow"), class: "btn btn-success btn-sm" %>
      <% end %>
    <% else %>
      <%= link_to t("application.buttons.unfollow"),
        relationship_path(current_user.active_relationships.detect{|relationship|
          relationship[:followed_id] == user.id}),
        class: "btn btn-danger btn-sm", method: :delete, remote: true %>
    <% end %>
  <% end %>
<% end %>
